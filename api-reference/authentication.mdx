---
title: "Authentication"
description: "Example overview page before API endpoints"
---

## Introduction

This API provides access to a cached list of SCP: Secret Laboratory servers, originally sourced from the official `lobbylist.php` endpoint. It enhances the original data by offering features like filtering by server properties, selecting specific fields, limiting results, and sorting servers by distance based on the requesting user's location.

The data is refreshed periodically via a scheduled task (typically every few minutes). The timestamp of the last successful data refresh is available via the `/timestamp` endpoint and the `X-Data-Timestamp` header in list responses.

**Base URL:** `{Your Cloudflare Worker URL}`

## Authentication

This API is public and does not require authentication.

---

## Endpoints

### Get Server List

Retrieves a list of servers, allowing for filtering, field selection, sorting, and limiting.

<RequestExample>

```bash Request
curl --location --request GET '{Your Cloudflare Worker URL}/?isoCode=US&modded=false&limit=5&fields=ip,port,players,info,isoCode&sortBy=distance'
```


```json Response 200
[
  {
    "ip": "157.254.169.180",
    "port": 20200,
    "players": "0/30",
    "info": "W0NBIEVhc3RdIFtObyBSdWxlc10gRWV2ZWUgQ2VudGVy",
    "isoCode": "US"
  },
  {
    "ip": "51.81.95.231",
    "port": 29160,
    "players": "0/20",
    "info": "PGNvbG9yPSMwMDgzZmY+RnVubnk8L2NvbG9yPiA8Y29sb3I9I2ZmMDAwMD5TY3A8L2NvbG9yPjxjb2xvcj0jMDAwMDAwMDA+PHNpemU9MT5FeGlsZWQgOS41LjE8L3NpemU+PC9jb2xvcj48Y29sb3I9IzAwMDAwMDAwPjxzaXplPTE+VUNSIDUuMC4wPC9zaXplPjwvY29sb3I+PGNvbG9yPSMwMDAwMDAwMD48c2l6ZT0xPkNlZE1vZFZlcmlmaWNhdGlvbjE0MTI0PC9zaXplPjwvY29sb3I+",
    "isoCode": "US"
  }
]
```


```json Response 500
{
  "error": "Failed to process request",
  "details": "Specific error message here"
}
```

</RequestExample>

**HTTP Request:** `GET /`

**Query Parameters:**

| Parameter | Type             | Description                                                                                                                                                                                                                          | Example           |
| :-------- | :--------------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :---------------- |
| `fields`  | string           | Optional. Comma-separated list of server object fields to include in the response. If omitted, all fields are returned.                                                                                                              | `ip,port,players` |
| `limit`   | integer          | Optional. Maximum number of server results to return. Defaults to returning all matching servers.                                                                                                                                    | `25`              |
| `sortBy`  | string           | Optional. Field to sort results by. Currently supports `distance` (sorts servers nearest to the client first, requires Cloudflare GeoIP). If omitted or invalid, no specific sorting is applied beyond the source order.             | `distance`        |
|           | string / boolean | Optional. **Dynamic Value Filter.** Any query parameter _not_ named `fields`, `limit`, or `sortBy` acts as a filter. The parameter name must match a field in the server data (e.g., `isoCode`), and the value is the desired value. | `isoCode=DE`      |
|           |                  | Filters match case-insensitively for strings. Boolean filters accept `true` or `false` (e.g., `modded=true`). Numeric filters match exact numbers (e.g., `port=7777`).                                                               | `modded=false`    |
|           |                  | You can apply multiple filters (e.g., `?isoCode=US&friendlyFire=true`).                                                                                                                                                              | `players=0/20`    |

**Responses:**

- : Successfully retrieved the server list (potentially filtered, sorted, limited). Returns a JSON array of server objects. The `X-Data-Timestamp` header indicates the freshness of the data.
- : An error occurred while processing the request. Returns a JSON error object.

---

### Get Data Timestamp

Retrieves the timestamp (Unix milliseconds) of the last time the server list data was successfully fetched and stored from the source API.

<RequestExample>

```bash Request
curl --location --request GET '{Your Cloudflare Worker URL}/timestamp'
```


```json Response 200
{
  "timestamp": 1678886400000
}
```


```json Response 404
{
  "error": "No data available yet."
}
```


```json Response 500
{
  "error": "Failed to fetch timestamp"
}
```

</RequestExample>

**HTTP Request:** `GET /timestamp`

**Parameters:** None

**Responses:**

- : Successfully retrieved the timestamp. Returns a JSON object `{ timestamp: number }`.
- : No data has been fetched and stored yet.
- : An error occurred while accessing the timestamp.

---

## Data Schema

Each object in the server list array generally follows this structure (fields depend on the source API and `fields` parameter):

```json
{
  "serverId": 87680,         
  "accountId": 19126,        
  "ip": "207.174.43.245",   
  "port": 7783,             
  "players": "0/25",         
  "distance": 2180,          
  "info": "PGNvbG...",      
  "pastebin": "GmHsVgPG",     
  "version": "14.1.0-...",   
  "privateBeta": true,       
  "friendlyFire": false,     
  "modded": false,           
  "modFlags": 0,             
  "whitelist": false,        
  "isoCode": "CA",           
  "continentCode": "NA",     
  "latitude": 45.499,        
  "longitude": -73.585,      
  "official": "REGIONAL OFFICIAL", 
  "officialCode": 2,         
  "displaySection": 1,       
  "_distanceFromClient": 150.7 
}
```